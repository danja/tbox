@prefix f:  <http://jena.apache.org/fuseki#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix tdb2:    <http://jena.apache.org/2016/tdb#> .
PREFIX ja:      <http://jena.hpl.hp.com/2005/11/Assembler#>
PREFIX tdb1:    <http://jena.hpl.hp.com/2008/tdb#>
@prefix : <http://purl.org/stuff/services/> .

[] a f:Server ;
   f:services (
     :ds :test-mem :test-db :semem
   ) .

:ds a f:Service ;
       f:name "ds" ;
       f:endpoint [ f:operation f:query ; ] ;
       f:endpoint [ f:operation f:update ; ] ;
       f:dataset [ a tdb2:DatasetTDB2 ;
                       tdb2:location "/fuseki/databases/ds" ;
                     ] .

:test-db a f:Service ;
    f:name "test-db" ;
    f:endpoint [
        f:operation f:query ;
        f:name "sparql"
    ];
    f:endpoint [
        f:operation f:query ;
        f:name "query"
    ] ;
    f:endpoint [
        f:operation f:update ;
        f:name "update"
    ] ;
    f:endpoint [
        f:operation f:gsp-r ;
        f:name "get"
    ] ;
    f:endpoint [
        f:operation f:gsp-rw ;
        f:name "data"
    ] ;
    f:endpoint [
        f:operation f:patch ;
        f:name "patch"
    ] ;
    f:dataset :dataset_test-db
    .

:dataset_test-db a    tdb1:DatasetTDB ;
    tdb1:location "/fuseki/databases/test-db" .

######################

:service a f:Service ;
    f:name "test-mem" ;

    ## The  GET /dataset?query= variants
    f:endpoint [ f:operation f:query ; ] ;
    ## gsp-rw covers gsp-r and upload.
    f:endpoint [ f:operation f:update ; ] ;
    f:endpoint [ f:operation f:gsp-rw ; ] ;
    ## RDF Patch
    f:endpoint [ f:operation f:patch ; ] ;

    f:endpoint [
        f:operation f:query ;
        f:name "sparql"
    ];
    f:endpoint [
        f:operation f:query ;
        f:name "query"
    ] ;
    f:endpoint [
        f:operation f:update ;
        f:name "update"
    ] ;
    f:endpoint [
        f:operation f:gsp-r ;
        f:name "get"
    ] ;
    f:endpoint [
        f:operation f:gsp-rw ;
        f:name "data"
    ] ;
    f:endpoint [
        ## RDF Patch
        f:operation f:patch ;
        f:name "patch"
    ] ;
    f:dataset :test-mem_dataset
    .

# Transactional in-memory dataset.
:test-mem_dataset a ja:MemoryDataset ;
    ## Optional load with data on start-up
    ## ja:data "data1.trig";
    ## ja:data "data2.trig";
    .
